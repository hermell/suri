{% load staticfiles %}

<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="description" content="A fully featured admin theme which can be used to build CRM, CMS, etc.">
    <meta name="author" content="Coderthemes">

    <link rel="shortcut icon" href="{% static 'images/favicon_1.ico' %}">

    <title>Minton - Responsive Admin Dashboard Template</title>

    <link href="{% static 'css/bootstrap.min.css' %}" rel="stylesheet" type="text/css">
    <link href="{% static 'css/core.css' %}" rel="stylesheet" type="text/css">
    <link href="{% static 'css/icons.css' %}" rel="stylesheet" type="text/css">
    <link href="{% static 'css/components.css' %}" rel="stylesheet" type="text/css">
    <link href="{% static 'css/pages.css' %}" rel="stylesheet" type="text/css">
    <link href="{% static 'css/menu.css' %}" rel="stylesheet" type="text/css">
    <link href="{% static 'css/responsive.css' %}" rel="stylesheet" type="text/css">

    <script src="{% static 'js/modernizr.min.js' %}"></script>

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js' %}"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js' %}"></script>
            <![endif]-->
</head>
<body>

<div class="wrapper-page">
    <div class="text-center">
        <a href="../index.html" class="logo logo-lg"><i class="md md-equalizer"></i> <span>Minton</span> </a>
    </div>
    <form class="form-horizontal m-t-20" action="../index.html">
        <div class="form-group">
            <div class="col-xs-12">
                <input class="form-control" type="text" required="" placeholder="ID">
                <i class="md md-account-circle form-control-feedback l-h-34"></i>
            </div>
        </div>
        <div class="form-group">
            <div class="col-xs-12">
                <input class="form-control" type="password" required="" placeholder="Password">
                <i class="md md-vpn-key form-control-feedback l-h-34"></i>
            </div>
        </div>
        <div class="form-group">
            <div class="col-xs-12">
                <div class="checkbox checkbox-primary">
                    <input id="checkbox-signup" type="checkbox">
                    <label for="checkbox-signup">
                        Remember me
                    </label>
                </div>

            </div>
        </div>
        <div class="form-group text-right m-t-20">
            <div class="col-xs-12">
                <button class="btn btn-primary btn-custom w-md waves-effect waves-light" type="submit">로그인
                </button>
            </div>
        </div>
        <div class="form-group m-t-30">
            <div class="col-sm-7">
                <a href="pages-recoverpw.html" class="text-muted"><i class="fa fa-lock m-r-5"></i> 패스워드를 잃어버리셨나요?</a>
            </div>
            <div class="col-sm-5 text-right">
                <a href="#user-register" class="text-muted waves-effect waves-light" data-toggle="modal">
                    계정이 없으신가요?
                </a>
                {#                    <a href="#" data-toggle="modal" data-target="#add-category" class="text-muted waves-effect waves-light" data-animation="door" data-plugin="custommodal" data-overlaySpeed="200" data-overlayColor="#36404a">#}
                {#                        계정이 없으신가요?#}
                {#                    </a>#}
            </div>
        </div>
    </form>
</div>

<!-- BEGIN MODAL -->
<!-- Modal Add Category -->


<!-- Right Sidebar -->
<div id="user-register" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"
     style="display: none;">
    <div class="modal-dialog">
        <div class="custom-modal-title">
            <button type="button" class="close m-t-5" data-dismiss="modal" aria-hidden="true">
                <span>&times;</span><span class="sr-only">Close</span>
            </button>
            <div class="panel-title"><h3 class="h4">이곳에서 회원가입을 해주세요</h3></div>
        </div>
        <div class="modal-content">
            <div class="wrapper-page">
                <form class="form-horizontal m-t-20" id="register-form" action="../index.html">
                    <div class="form-group">
                        <label for="user_email" class="col-sm-3 control-label">Email</label>
                        <div class="col-sm-9">
                            <input class="form-control" type="email" class="form-control" id="user_email"
                                   name="user_email" placeholder="이메일 주소를 입력하세요">
                            <i class="md md-email form-control-feedback l-h-34"></i>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="nick_name" class="col-sm-3 control-label">Nick name</label>
                        <div class="col-sm-9">
                            <input class="form-control" type="text" class="form-control" id="nick_name" name="nick_name"
                                   placeholder="닉네임을 입력하세요">
                            <i class="md md-account-circle form-control-feedback l-h-34"></i>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="password" class="col-sm-3 control-label">Password</label>
                        <div class="col-sm-9">
                            <input class="form-control" type="password" class="form-control" id="password"
                                   name="password" placeholder="비밀번호를 입력하세요">
                            <i class="md md-vpn-key form-control-feedback l-h-34"></i>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="re-password" class="col-sm-3 control-label">Re Password</label>
                        <div class="col-sm-9">
                            <input class="form-control" type="password" class="form-control" id="re-password"
                                   name="re-password" placeholder="비밀번호를 다시 입력하세요">
                            <i class="md md-vpn-key form-control-feedback l-h-34"></i>
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="col-xs-12">
                            <p id="warning" class="text-danger text-right" style="display: none;">
                                <i class="md md-warning text-danger la-2x"></i><span id="warning_text"></span>
                            </p>
                            <p id="good" class="text-success text-right" style="display: none;">
                                <i class="md md-tag-faces text-success la-2x"></i><span
                                    id="good_text">등록 가능한 정보입니다.</span>
                            </p>
                        </div>
                    </div>

                    <div class="form-group text-right m-t-20">
                        <div class="col-xs-12">
                            <button class="btn btn-primary btn-custom waves-effect waves-light w-md" type="submit">
                                회원가입
                            </button>
                        </div>
                    </div>

                    <div class="form-group m-t-30">
                        <div class="col-sm-12 text-center">
                            <a class="text-muted" data-dismiss="modal" aria-hidden="true">이미 계정이 있으신가요?</a>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div><!-- /.modal -->

<script>
    var resizefunc = [];
</script>

<!-- Main  -->
<script src="{% static 'js/jquery.min.js' %}"></script>
<script src="{% static 'js/bootstrap.min.js' %}"></script>
<script src="{% static 'js/detect.js' %}"></script>
<script src="{% static 'js/fastclick.js' %}"></script>
<script src="{% static 'js/jquery.slimscroll.js' %}"></script>
<script src="{% static 'js/jquery.blockUI.js' %}"></script>
<script src="{% static 'js/waves.js' %}"></script>
<script src="{% static 'js/wow.min.js' %}"></script>
<script src="{% static 'js/jquery.nicescroll.js' %}"></script>
<script src="{% static 'js/jquery.scrollTo.min.js' %}"></script>
<script src="{% static 'plugins/switchery/switchery.min.js' %}"></script>

<!-- Custom main Js -->
<script src="{% static 'js/jquery.core.js' %}"></script>
<script src="{% static 'js/jquery.app.js' %}"></script>

<!-- Modal-Effect -->
<script src="{% static 'plugins/custombox/dist/custombox.min.js' %}"></script>
<script src="{% static 'plugins/custombox/dist/legacy.min.js' %}"></script>

<script>
    $(document).ready(function () {

        var emailVaildChk = function () {

                //이메일 주소 유효성 검사
                var email = $("#user_email").val();
                //이메일 정규식
                var regExp = /[0-9a-zA-Z][_0-9a-zA-Z-]*@[_0-9a-zA-Z-]+(\.[_0-9a-zA-Z-]+){1,2}$/
                var isValid = {};

                if ($.trim(email) == "") {
                    isValid["result"] = false;
                    isValid["message"] = "이메일 주소를 입력하세요.";
                } else {
                    if (email.match(regExp)) {
                        isValid["result"] = true;
                    } else {
                        isValid["result"] = false;
                        isValid["message"] = "이메일 주소가 형식에 맞지 않습니다.";
                    }
                }
                return isValid;
            };

            var emailDuplChk = function () {

                var email = $("#user_email").val();

                var isRegistered = {};

                $.ajax({
                    url: '/login_app/email_validation_chk',
                    type: "POST",
                    dataType: "json",
                    async: false,                   //ajax의 결과값을 변수에 할당하기 위해서는 비동기 여부를 false로 설정
                    data: {"user_email": email, "csrfmiddlewaretoken": "{{ csrf_token }}"},
                    success: function (data) {
                        isRegistered["result"] = data.result;

                        //중복된 id인 경우
                        if (!isRegistered.result) {
                            isRegistered["message"] = "이미 등록된 이메일 주소입니다.";
                        }
                        return isRegistered;
                    }
                });
                return isRegistered;
            };

            var nicknameVaildChk = function () {

                var nickname = $("#nick_name").val();
                var isValid = {};

                if ($.trim(nickname) == "") {
                    isValid["result"] = false;
                    isValid["message"] = "사용할 닉네임을 입력하세요";
                } else {
                    isValid["result"] = true;
                }

                return isValid;
            };

            var nickNameDuplChk = function () {

                var nickname = $("#nick_name").val();
                var isRegistered = {};

                $.ajax({
                    url: '/login_app/nickname_validation_chk',
                    type: "POST",
                    dataType: "json",
                    async: false,                   //ajax의 결과값을 변수에 할당하기 위해서는 비동기 여부를 false로 설정
                    data: {"nickname": nickname, "csrfmiddlewaretoken": "{{ csrf_token }}"},
                    success: function (data) {
                        isRegistered["result"] = data.result;

                        //중복된 id인 경우
                        if (!isRegistered.result) {
                            isRegistered["message"] = "이미 등록된 닉네임입니다. 다른 닉네임을 사용하시기 바랍니다.";
                        }
                        return isRegistered;
                    }
                });
                return isRegistered;
            };

            var validChkFuncs = [
                {id:"user_email", func: emailVaildChk, checked: false},
                {id:"user_email", func: emailDuplChk, checked: false},
                {id:"nick_name", func: nicknameVaildChk, checked: false},
                {id:"nick_name", func: nickNameDuplChk, checked: false},
            ];

        $("#user_email, #nick_name, #password, #re-password").keyup(function (e) {

            var validChkFuncResult = {};

            $(validChkFuncs).each(function (index, jsonObj) {

                if(validChkFuncs[index].id == e.target.id) {
                    validChkFuncs[index].checked = false;
                }

                if (!validChkFuncs[index].checked) {
                    validChkFuncResult = jsonObj.func();
                    validChkFuncs[index].checked = validChkFuncResult["result"];

                    if (!validChkFuncResult["result"]) {
                        return false;
                    }
                }
            });

            if (validChkFuncResult["result"]) {
                $("#warning").hide();
                $("#good").show();
            } else {
                $("#good").hide();
                $("#warning_text").html(validChkFuncResult["message"]);
                $("#warning").show();
            }
        });
    });
</script>

</body>
</html>